<div class="container">
  <p id="notice"><%= notice %></p>
  <p class="product-show"><h2>Business Solutions</h2></p>
  <div class="product-box">
    <div class="row">
      <div class="col-xs-12">
        <p>
          <% cache @product do %>
            <h3><strong><%= @product.name %></strong></h3>
        </p>
      </div>
      <div class="col-md-6 col-xs-12" id="image-div">
        <p>
          <%= image_tag(@product.image_url, class: "img-responsive img-zoom", data_image_zoom: "large/image.url") %>
        </p>
      </div>      
      <div class="col-md-6 col-xs-12">
        <div class="row"  data-product-id="<%= @product.id %>">
          <div class="col-xs-12"> 
            <strong>Average Rating:</strong>
            <% if @product.comments.count>0 %>
              <div class="rated p-rating" id="average-rating" data-score="<%= @product.average_rating %>"></div>
            <% else %>
              <div class="p-rating">Not yet rated</div>
            <% end %> 
          <br>
          </div>         
          <div class="col-xs-12">
            <p class="product-show">
              <strong>Description:</strong><br/>
              <%= @product.description %>
            </p>
          </div>  
          <div class="col-xs-12">
            <p class="product-show">
              <strong>Price:</strong>
              $<%= @product.price %>
            </p>
          </div>   
          <div class="col-xs-12">
            <p class="product-show">
              <%= form_tag "/payments/create" do %>
                <%= hidden_field_tag(:product_id, @product.id) %>
                <%= render partial: "shared/stripe_checkout_button" %>
              <% end %>
            </p>
          </div>            
        </div><!--inner col-->  
      </div><!--col-->  
      <div class="col-xs-12">  
        <hr>
        <div class="col-md-6 col-xs-12">
          <div class="col-xs-12">
            <%= render partial: "new_comment" %>
          </div>  
        </div>
        <div class="col-md-6 col-xs-12">
          <div class="col-xs-12">
            <p class="p-rating">
              <h4 class="rating-label">Highest Rating</h4>
              <% if @product.comments.count>0 %>  
                <p class="p-rating">
                  <div class="rated p-rating" id="highest-rating" data-score="<%= @product.highest_rating %>"></div>
                </p>           
                <p class="p-rating"><%= @product.highest_rating_comment %></p>
              <% else %>
                <p>Not yet rated</p>
              <% end %> 
            </p>
          </div>
          <div class="col-xs-12">
            <p class="p-rating">
              <h4 class="rating-label">Lowest Rating</h4>
              <% if @product.comments.count>0 %>
                <p class="p-rating">
                  <div class="rated p-rating" id="lowest-rating" data-score="<%= @product.lowest_rating %>"></div>
                </p>
                <p class="p-rating"><%= @product.lowest_rating_comment %></p>
              <% else %>
                <p>Not yet rated</p>
              <% end %> 
            </p>
          </div>
        </div><!--inner col-->  
        <div class="col-xs-12">  
          <hr>
          <h4>All Reviews</h4>
          <div class="alert alert-info" style="display:none" role="alert">A new comment was posted!</div>
          <%= render partial: "comments", locals: {comments: @product.comments }  %>
          <%= will_paginate @comments %>
        <% end %><!--end cache--> 
        </div><!--inner col-->  
      </div><!--col-->  
    </div><!--row-->
  </div><!--box-->
  <div class="row">
    <div class="col-xs-2 col-xs-offset-1">
      <% cache do %>
        <% if signed_in? && current_user.admin? %>
          <%= link_to 'Edit', edit_product_path(@product) %> |
        <% end %>
        <%= link_to 'Back', products_path %>
      <% end %>   
    </div>
  </div>
</div>